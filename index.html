<!DOCTYPE html>
<html lang="th">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏°‡∏≤‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î ‡∏°.4/1</title>
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
        <link rel="stylesheet" href="style.css">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style"
            content="black-translucent">
    </head>
    <body>

        <div class="container">
            <div id="page-dashboard" class="page active">
                <header>
                    <h1>üìä ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏°‡∏≤‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î ‡∏°.4/1</h1>
                    <p>‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡∏µ‡∏¢‡∏£‡∏ï‡∏¥‡∏ö‡∏±‡∏ï‡∏£ <b>‡∏Ñ‡∏ô‡∏á‡∏≤‡∏ô‡∏î‡∏µ‡πÄ‡∏î‡πà‡∏ô</b> ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏õ‡∏µ 2569
                    <br>‡πÇ‡∏î‡∏¢ ‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ô‡∏¥‡∏à‡∏¥‡∏ï‡∏ï‡∏≤ ‡∏û‡∏¥‡∏û‡∏±‡∏í‡∏ô‡πå‡∏ô‡∏¥‡∏ò‡∏¥‡∏Å‡∏∏‡∏•‡∏ä‡∏±‡∏¢ (‡∏´‡∏±‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡∏´‡πâ‡∏≠‡∏á)</br></p>
                </header>

                <div class="admin-tabs"
                    style="margin-bottom: 20px; background: #eef2f3; border-radius: 12px; padding: 5px;">
                    <button id="btn-show-top" class="tab-btn active-tab"
                        onclick="switchDashboardTab('top')">üåü ‡∏°‡∏≤‡∏ö‡πà‡∏≠‡∏¢</button>
                    <button id="btn-show-absent" class="tab-btn"
                        onclick="switchDashboardTab('absent')">üö©
                        ‡∏Ç‡∏≤‡∏î‡∏ö‡πà‡∏≠‡∏¢</button>
                    <button id="btn-show-history" class="tab-btn"
                        onclick="switchDashboardTab('history')">üîç
                        ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</button>
                    <button id="btn-show-individual" class="tab-btn"
                        onclick="switchDashboardTab('individual')">üë§
                        ‡∏£‡∏≤‡∏¢‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•</button>
                </div>

                <section id="dash-top" class="dash-section active-section">
                    <div class="rank-box"
                        style="border-top: 5px solid #27ae60;">
                        <h4>üåü ‡∏ö‡πâ‡∏≤‡∏ô‡∏°‡∏µ‡πÑ‡∏°‡πà‡∏≠‡∏¢‡∏π‡πà ‡∏ä‡∏≠‡∏ö‡∏≠‡∏¢‡∏π‡πà‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h4>
                        <ul id="topWorkers"></ul>
                    </div>
                </section>

                <section id="dash-absent" class="dash-section"
                    style="display:none;">
                    <div class="rank-box"
                        style="border-top: 5px solid #e74c3c;">
                        <h4>üö© OT ‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô</h4>
                        <ul id="topAbsentees"></ul>
                    </div>
                </section>

                <section id="dash-history" class="dash-section"
                    style="display:none;">
                    <div class="rank-box"
                        style="border-top: 5px solid #3498db;">
                        <h3>üîç ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</h3>
                        <div class="filter-box" style="text-align: center; margin-bottom: 15px; display: flex; gap: 10px; align-items: center;">
                        <div class="filter-box" style="text-align: center; margin-bottom: 15px; display: flex; gap: 10px; align-items: center;">
                        <select id="filterDate" onchange="listenToFirebase()" style="padding: 12px; border: 2px solid #3498db; border-radius: 12px; font-size: 1rem; flex: 1; font-family: 'Sarabun'; background: white; cursor: pointer; box-shadow: 0 4px 6px rgba(0,0,0,0.05);">
                            <option value="">üìÖ ‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                        </select>
    
                        <button onclick="showDailySummary()" style="padding: 12px 20px; cursor: pointer; border-radius: 12px; border: none; background: #3498db; color: white; font-weight: bold; box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);">
                            üìä ‡∏™‡∏£‡∏∏‡∏õ
                        </button>
                    </div>
                    </div>
                        <div class="table-wrapper">
                            <table>
                                <thead>
                                    <tr>
                                        <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
                                        <th>‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</th>
                                        <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                                    </tr>
                                </thead>
                                <tbody id="summaryBody"></tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <section id="dash-individual" class="dash-section"
                    style="display:none;">
                    <div class="rank-box"
                        style="border-top: 5px solid #9b59b6;">
                        <h4>üë§ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏£‡∏≤‡∏¢‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•</h4>
                        <div id="individualMemberList" class="individual-list">
                        </div>
                    </div>
                </section>

                <button class="nav-btn-bottom" onclick="enterAdminMode()">‚öôÔ∏è
                    ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
            </div>

            <div id="page-admin" class="page">
                <div class="admin-header">
                    <h1 style="font-size: 1.2rem; margin:0;">üõ†Ô∏è
                        ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Admin)</h1>
                    <button class="back-btn" onclick="exitAdminMode()">üè†
                        ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
                </div>
                <div class="admin-tabs">
                    <button id="btn-tab-checkin" class="tab-btn active-tab"
                        onclick="switchAdminTab('checkin')">üìù
                        ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠</button>
                    <button id="btn-tab-edit" class="tab-btn"
                        onclick="switchAdminTab('edit')">‚úèÔ∏è
                        ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç/‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
                </div>
                <section id="section-checkin"
                    class="admin-section active-section" style="padding: 15px;">
                    <div class="date-picker">
                        <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: </label>
                        <input type="date" id="workDate">
                    </div>
                    <div class="table-wrapper">
                        <table>
                            <thead>
                                <tr>
                                    <th>‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà</th>
                                    <th>‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</th>
                                    <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                                </tr>
                            </thead>
                            <tbody id="memberList"></tbody>
                        </table>
                    </div>
                    <button class="save-btn" onclick="saveAttendance()">üíæ
                        ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</button>
                </section>
                <section id="section-edit" class="admin-section"
                    style="padding: 15px;">
                    <div class="table-wrapper">
                        <table>
                            <thead>
                                <tr>
                                    <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
                                    <th>‡∏ä‡∏∑‡πà‡∏≠</th>
                                    <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                                    <th>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</th>
                                    <th>‡∏•‡∏ö</th>
                                </tr>
                            </thead>
                            <tbody id="adminSummaryBody"></tbody>
                        </table>
                    </div>
                    <button class="clear-btn" onclick="clearData()"
                        style="background: #c0392b; width:100%; margin-top:20px; color:white; border:none; padding:15px; border-radius:8px; cursor:pointer;">‚ö†Ô∏è
                        ‡∏•‡πâ‡∏≤‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                </section>
            </div>
        </div>

        <div id="individualModal" class="modal">
            <div class="modal-content">
                <span class="close-modal"
                    onclick="closeIndividualModal()">&times;</span>
                <div class="modal-header">
                    <h3 id="selectedName"
                        style="color: #e67e22;">‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h3>
                </div>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
                                <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                            </tr>
                        </thead>
                        <tbody id="individualTableBody"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="summaryModal" class="modal">
            <div class="modal-content">
                <span class="close-modal" onclick="closeSummaryModal()">&times;</span>
                <div class="modal-header">
                    <h2 id="summaryTitle" style="color: #2c3e50; margin: 0;">üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</h2>
                </div>
                <div id="summaryContent" style="padding: 20px 0; line-height: 1.8;">
                    </div>
                <button class="nav-btn-bottom" onclick="closeSummaryModal()" style="margin-top: 10px;">‡∏ï‡∏Å‡∏•‡∏á</button>
            </div>
        </div>

        <script
            src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
        <script
            src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
        <script src="script.js"></script>
    </body>
</html>